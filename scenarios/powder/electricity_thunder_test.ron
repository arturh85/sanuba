(
    name: "Electricity Thunder Test",
    description: "Tests that powered THUNDER destroys adjacent non-conductors.",

    setup: [
        // Place a battery to power the circuit (uses PlaceMaterial to trigger SPARK_SOURCE flag)
        (type: "PlaceMaterial", material: "battery", x: 10, y: 10, radius: 1),
        // Place wire next to battery
        (type: "FillRect", min_x: 11, max_x: 11, min_y: 10, max_y: 10, material: "wire"),
        // Place Thunder next to the wire (will be powered when wire gets power)
        (type: "FillRect", min_x: 12, max_x: 12, min_y: 10, max_y: 10, material: "thunder"),
        // Place non-conductive materials adjacent to Thunder
        (type: "FillRect", min_x: 13, max_x: 13, min_y: 10, max_y: 10, material: "stone"),
        (type: "FillRect", min_x: 12, max_x: 12, min_y: 9, max_y: 9, material: "wood"),
        (type: "FillRect", min_x: 12, max_x: 12, min_y: 11, max_y: 11, material: "wood"),
    ],

    actions: [
        (type: "WaitFrames", frames: 10), // Allow power to propagate and thunder to activate
    ],

    verify: [
        // Battery should remain
        (type: "MaterialAt", x: 10, y: 10, expected: "battery"),
        // Wire should remain
        (type: "MaterialAt", x: 11, y: 10, expected: "wire"),
        // Thunder should be consumed (turned to AIR)
        (type: "MaterialAt", x: 12, y: 10, expected: "air"),
        // Adjacent non-conductors should be destroyed
        (type: "MaterialAt", x: 13, y: 10, expected: "air"),
        (type: "MaterialAt", x: 12, y: 9, expected: "air"),
        (type: "MaterialAt", x: 12, y: 11, expected: "air"),
    ],

    cleanup: [],
)
